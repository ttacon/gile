!function(a,b,c,d){var e={defaultButtonLabel:"Choose file",buttonClass:"gile-btn-default",buttonSelectedClass:"gile-btn-selected",onChange:function(){},onClick:function(){},onCancel:function(){this.reset()}};var f=function(b,c){this.elem=b,this.$elem=a(b),this.options=a.extend({},e,c),this._init()};f.prototype={constructor:f,_init:function(){this._createButton(),this._bindButton()},_createButton:function(){this.$parent=a("<div/>"),this.$parent.addClass("gile-parent"),this.$label=a("<span/>"),this.$label.addClass(this.options.buttonClass),this.fileInput=this.$elem.wrap(this.$parent),this.$parent=this.$elem.parent(),this.$parent.before(this.$label),this.$label=this.$parent.siblings().filter("."+this.options.buttonClass),this.$label.text(this.$elem.val()),this.lastFileName=this.options.defaultButtonLabel,this.lastFile={}},_bindButton:function(){this.$label.click(function(){a(this).next().children().filter('input[type="file"]').click()}).show(),this.fileInput.change(function(){a(this).data("gile").updateVal(this)}),this.$label.text(this.options.defaultButtonLabel)},doClick:function(){this.onClick()},updateVal:function(a){var b=a.value;return b?(this.$label.text(b.replace("C:\\fakepath\\","")).removeClass(this.options.buttonClass).addClass(this.options.buttonSelectedClass),this.lastFileName=this.$label.text(),this.lastFile=a.files[0],void this.options.onChange(b,this.lastFile)):void this.options.onCancel.call(this)},reset:function(){this.$label.text(this.lastFileName)},val:function(){return this.lastFileName},file:function(){return this.lastFile}},a.fn.gile=function(b){var c=arguments,d=this;return this.each(function(e){var g=a.data(this,"gile");g?"string"==typeof b&&"function"==typeof g[b]&&g[b].apply(g,Array.prototype.slice.call(c,1)):(a.data(this,"gile",new f(this,b)),e===d.length-1&&a(this).trigger("ready.Gile"))})}}(jQuery,window,document);